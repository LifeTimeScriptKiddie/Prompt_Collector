={"data":"# FRONT.md\n\nComprehensive Front‑End Implementation Plan for *The Insight Engine*\n*Target AI: Gemini 2.5 pro  •  Date: July 11, 2025*\n\n---\n\n## Prelude: Optimized Prompt Injection\n\n> **Role:** You are a senior React architect and performance engineer specializing in Next.js 14, Tailwind CSS, and cutting‑edge front‑end ecosystems.\n> **Task:** Produce a **detailed**, **example‑rich**, **code‑annotated** FRONT.md plan covering architecture, UI/UX, integrations, testing, and deployment.\n> **Tone:** Expert consultative—concise yet comprehensive, with best‑practice rationales.\n\n**Insert this preamble when invoking Gemini 2.5 pro** to unlock maximal detail, sample snippets, and actionable insights.\n\n---\n\n## 1. Strategic Objectives\n\n1. **Performance First:** Achieve LCP < 1.2 s, TBT < 100 ms, CLS < 0.02.\n2. **Scalable UX:** Modular, theme‑aware components with dynamic theming.\n3. **Dev DX:** Developer‑friendly architecture: auto‑typed APIs, visual component library, CI‑guarded quality.\n\n---\n\n## 2. Refined Tech Ecosystem\n\n| Category                | Toolset                                         | Rationale                                           |\n| ----------------------- | ----------------------------------------------- | --------------------------------------------------- |\n| Framework & SSR/SSG     | Next.js 14 (App Router, RSC)                    | Hybrid SSG/SSR, partial hydration, Turbopack optics |\n| Styling                 | Tailwind CSS JIT + Stitches + Shadcn/UI         | Ultra‑fast JIT, zero‑runtime styling, UI primitives |\n| UI Primitives           | Radix UI + Headless UI + @ariakit/react         | Unstyled, accessible building blocks                |\n| State & Data            | Zustand + TanStack Query + SWR for ISR          | Local/global state, cache‑first & revalidation      |\n| API Contracts           | tRPC + Zod schemas                              | End‑to‑end type safety, input validation            |\n| Animations              | Framer Motion + Motion One                      | High‑performance, interruptible animations          |\n| Forms & Validation      | React Hook Form + Zod + Yup                     | Minimal rerenders, declarative schemas              |\n| Icons & Graphics        | Lucide‑React + unDraw API                       | Lightweight, dynamic SVGs                           |\n| Dev Environment         | Turborepo Monorepo + pnpm                       | Workspace scaling, fast CI                          |\n| Component Documentation | Storybook v7 + MDX + Chromatic                  | Living style guide, visual regression tests         |\n| Testing                 | Jest + React Testing Library + Playwright + Axe | Unit, integration, E2E, and accessibility checks    |\n| Monitoring & Metrics    | web-vitals + Sentry + LogRocket                 | Real‑time metrics and error insights                |\n| CI/CD                   | GitHub Actions → Vercel → Cloudflare CDN        | Automated checks, edge distribution                 |\n\n---\n\n## 3. Design System & UX Blueprint\n\n1. **Design Tokens & Theming**\n\n   * Central JSON of colors, fonts, spacings.\n   * Two-level theming: light/dark + high‑contrast.\n2. **Atomic Component Library**\n\n   * Define atoms, molecules, organisms in Storybook.\n   * Example:\n\n   ```tsx\n   // Button.tsx (atom)\n   import { forwardRef } from 'react';\n   import { cva } from 'class-variance-authority';\n\n   const buttonStyles = cva('inline-flex items-center justify-center rounded-lg', {\n     variants: { size: { sm: 'px-3 py-1.5', md: 'px-4 py-2' } },\n     defaultVariants: { size: 'md' },\n   });\n\n   export const Button = forwardRef(({ size, children, ...props }, ref) => (\n     <button ref={ref} className={buttonStyles({ size })} {...props}>{children}</button>\n   ));\n   ```\n3. **Accessibility & Internationalization**\n\n   * ARIA roles, keyboard nav, screen‑reader labels.\n   * i18n via `next-intl`, locale routing.\n4. **Micro‑Interactions**\n\n   * Use Framer Motion’s `animatePresence` for modals, `useScroll` for header transitions.\n\n---\n\n## 4. Architecture & Code Organization\n\n```\n/my-app\n ├─ /app\n │   ├─ layout.tsx            # Global providers, theme\n │   ├─ page.tsx              # Marketing SSG pages\n │   └─ /playground\n │       ├─ /summarization     # Chat UI & streaming data\n │       └─ /clips             # Clip carousel & filters\n ├─ /components               # Reusable atoms/molecules\n ├─ /hooks                    # useUploadVideo, useSummary\n ├─ /lib\n │   ├─ api.ts                # tRPC client + auth\n │   └─ queryClient.ts        # React Query config\n ├─ /styles                   # globals.css, stitches config\n ├─ /tests                    # unit + integration + axe tests\n └─ /scripts                  # prebuild, lint, analyze\n```\n\n**Key Patterns:**\n\n* **Colocation** of tests and CSS modules.\n* **Barrel exports** in `/components/index.ts`.\n\n---\n\n## 5. Data & Integration Flow\n\n1. **tRPC Router**: `appRouter` with procedures for `upload`, `summarize`, `clips` (Zod schemas).\n2. **Client Hooks**: Prefetch summary on upload success; staleTime = 5 min.\n3. **WebSocket Streaming**: SSE for real‑time summary; fallback to polling.\n\nSample Hook:\n\n```ts\nexport function useSummary(videoId: string) {\n  return trpc.summarize.useInfiniteQuery({ videoId }, {\n    getNextPageParam: (last) => last.nextCursor,\n  });\n}\n```\n\n---\n\n## 6. Performance & Optimization\n\n* **Edge Caching**: ISR with `revalidate: 30` on static pages.\n* **Resource Hints**: `<link rel=\"preconnect\">` on APIs, `<link rel=\"preload\">` for LCP image.\n* **Lazy Module Loading**: `dynamic(() => import('chart.js'), { ssr: false })`.\n* **Asset Compression**: Brotli via Vercel settings.\n\n---\n\n## 7. Testing & QA Protocol\n\n* **Unit Tests:** Jest + RTL; snapshot minimal.\n* **E2E Scenarios:** Playwright CI with cross‑browser matrix.\n* **Accessibility:** `@axe-core/playwright` hooks in CI.\n* **Visual Regression:** Chromatic gating on PR.\n\n---\n\n## 8. CI/CD & Observability\n\n1. **GitHub Actions**:\n\n   * `lint` → `build` → `test` → `storybook` → `deploy-preview`.\n   * Secrets: `VERCEL_TOKEN`, Sentry DSN.\n2. **Vercel & Cloudflare**:\n\n   * Edge functions for data‑heavy routes.\n   * Custom cache rules for static assets.\n3. **Monitoring**:\n\n   * Sentry release tagging via Git SHA.\n   * Web Vitals Dashboard in Vercel Analytics.\n\n---\n\n## 9. Roadmap & Sprint Breakdown\n\n| Sprint | Focus                          | Output                               |\n| ------ | ------------------------------ | ------------------------------------ |\n| 1      | Design System & Monorepo Setup | Tokens, Storybook, CI baseline       |\n| 2–3    | Playground 1 Core UI           | Chat interface, streaming components |\n| 4–5    | Playground 2 Core UI           | Clip carousel, filter panel          |\n| 6      | Perf & Accessibility           | Lighthouse ≥ 95, WCAG AA compliance  |\n| 7      | Testing & QA                   | Full test suite, visual regressions  |\n| 8      | Deployment & Observability     | Production rollout, monitoring setup |\n\n---\n\n## 10. Continuous Improvement\n\n* **Monthly Audits:** Lighthouse, Sentry trends, user feedback.\n* **Component Versioning:** Semantic versioning and changelogs.\n* **UX Research:** Bi‑weekly user testing sessions.\n\n---\n"}